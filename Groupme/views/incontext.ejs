<!DOCTYPE html>
<html>
  <head>
    <title>In Context</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <div id="result">
    <%if(messagesBefore) { %>
        <%for(let message of messagesBefore) { %>
            <div class="result-item">
                <div class="result-content">
                  <p><%= message.date %></p>
                  <b><%= message.author %></b>
                  <div> <!-- New div for better control over layout -->
                    <% if (message.text != null && message.text.substring(0, 4)!="http") { %>
                      <p><%= message.text %></p>
                    <% } %>
                    <% if (message.text == null) { %>
                      <a href="<%= message.img %>" target="_blank" rel="noopener noreferrer">Link to img</a>
                      <br> <!-- Ensure separation -->
                    <% } %>
                    <% if (message.text!=null && message.text.substring(0, 4)=="http") { %>
                      <a href="<%= message.text %>" target="_blank" rel="noopener noreferrer">Link to video</a>
                      <br> <!-- Ensure separation -->
                    <% } %>
                  </div>
                  <p style="color: blue">Likes: <%= message.likes %></p>
                </div>
              </div>
            <% } %>
        <% } %>
        <div class="result-item">
            <div class="result-content">
              <% message = message[0] %>
              <p><%= message.date %></p>
              <b><%= message.author %></b>
              <div> <!-- New div for better control over layout -->
                <% if (message.text != null && message.text.substring(0, 4)!="http") { %>
                  <p><%= message.text %></p>
                <% } %>
                <% if (message.text == null) { %>
                  <a href="<%= message.img %>" target="_blank" rel="noopener noreferrer">Link to img</a>
                  <br> <!-- Ensure separation -->
                <% } %>
                <% if (message.text!=null && message.text.substring(0, 4)=="http") { %>
                  <a href="<%= message.text %>" target="_blank" rel="noopener noreferrer">Link to video</a>
                  <br> <!-- Ensure separation -->
                <% } %>
              </div>
              <p style="color: blue">Likes: <%= message.likes %></p>
            </div>
          </div>
    <%if(messagesAfter) { %>
        <%for(let message of messagesAfter) { %>
            <div class="result-item">
                <div class="result-content">
                    <p><%= message.date %></p>
                    <b><%= message.author %></b>
                    <div> <!-- New div for better control over layout -->
                    <% if (message.text != null && message.text.substring(0, 4)!="http") { %>
                        <p><%= message.text %></p>
                    <% } %>
                    <% if (message.text == null) { %>
                        <a href="<%= message.img %>" target="_blank" rel="noopener noreferrer">Link to img</a>
                        <br> <!-- Ensure separation -->
                    <% } %>
                    <% if (message.text!=null && message.text.substring(0, 4)=="http") { %>
                        <a href="<%= message.text %>" target="_blank" rel="noopener noreferrer">Link to video</a>
                        <br> <!-- Ensure separation -->
                    <% } %>
                    </div>
                    <p style="color: blue">Likes: <%= message.likes %></p>
                </div>
                </div>
            <% } %>
        <% } %>
            </div>
  </body>